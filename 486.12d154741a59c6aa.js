"use strict";(self.webpackChunkqforms=self.webpackChunkqforms||[]).push([[486],{57534:(j,h,r)=>{r.r(h),r.d(h,{LockscreenModule:()=>l});var d=r(36895),v=r(21366),i=r(24006),a=r(858),e=r(94650),g=r(51491),p=r(90263),f=r(86616),S=r(8651),Z=r(80529);function b(o,t){1&o&&(e.TgZ(0,"div"),e._uU(1," Password is required "),e.qZA())}function w(o,t){if(1&o&&(e.TgZ(0,"div",38),e.YNc(1,b,2,0,"div",39),e.qZA()),2&o){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",s.f.password.errors.required)}}const x=function(o){return{"is-invalid":o}};function A(o,t){if(1&o){const s=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"h5",22),e._uU(6,"Lock Screen"),e.qZA(),e.TgZ(7,"p",23),e._uU(8," Enter your password to unlock the screen! "),e.qZA()(),e.TgZ(9,"div",24),e._UZ(10,"img",25),e.TgZ(11,"h5",26),e._uU(12),e.qZA()(),e.TgZ(13,"div",27)(14,"form",28),e.NdJ("ngSubmit",function(){e.CHM(s);const m=e.oxw();return e.KtG(m.onSubmit())}),e.TgZ(15,"div",29)(16,"label",30),e._uU(17,"Password"),e.qZA(),e._UZ(18,"input",31),e.YNc(19,w,2,1,"div",32),e.qZA(),e.TgZ(20,"div",33)(21,"button",34),e._uU(22," Unlock "),e.qZA()()()()()(),e.TgZ(23,"div",35)(24,"p",36),e._uU(25," Not you ? return "),e.TgZ(26,"a",37),e._uU(27," Signin "),e.qZA()()()()()}if(2&o){const s=e.oxw();e.xp6(12),e.Oqu(s.username),e.xp6(2),e.Q6J("formGroup",s.lockscreenForm),e.xp6(4),e.Q6J("ngClass",e.VKq(4,x,s.submitted&&s.f.password.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.password.errors)}}function U(o,t){1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"lord-icon",40),e.qZA(),e.TgZ(6,"div",15)(7,"h5"),e._uU(8,"Authenticating User"),e.qZA()()()()()())}class c{constructor(t,s,n,m,B,F,I){this.formBuilder=t,this.Api=s,this.Auth=n,this.router=m,this.tokenService=B,this.toastService=F,this.httpBackend=I,this.submitted=!1,this.error="",this.year=(new Date).getFullYear(),this.beforeSend=!1,this.username="",this.objLogin={}}ngOnInit(){this.lockscreenForm=this.formBuilder.group({password:["",[i.kI.required]]}),this.objLogin.email=this.tokenService.getUserEmail(),this.username=this.tokenService.getUserName()}get f(){return this.lockscreenForm.controls}onSubmit(){this.submitted=!0,this.beforeSend=!0,!this.lockscreenForm.invalid&&(this.objLogin.password=this.lockscreenForm.value.password,this.objLogin.remember=!1,this.Api.loginWithoutInterceptor(this.objLogin).subscribe(t=>{this.beforeSend=!1,this.handleResponse(t)},t=>{this.beforeSend=!1,this.handleError(t)}))}handleError(t){const s=t;console.log(s),this.toastService.errorSwal("The given data was invalid."!==t.error.message?500!==t.status?s.error.errors.password?s.error.errors.password:t:t.statusText:"Invalid Credentials","5000")}handleResponse(t){if(t.password||t.email)return"User is inactive or suspended!"===t.email?void this.toastService.errorSwal(t.email,"5000"):void this.toastService.errorSwal("Invalid Credentials","5000");this.tokenService.handle(t.access_token),t.user.superadmin?this.tokenService.setSuuperAdminUser(t.user):this.tokenService.setUser(t.user),this.Auth.changeUserRoles({Administrator:void 0!==t.user.Administrator&&t.user.Administrator,FormDesigner:void 0!==t.user.FormDesigner&&t.user.FormDesigner,isApprover:void 0!==t.user.approver&&t.user.approver,Customer:void 0!==t.user.Customer&&t.user.Customer,isSuperadmin:void 0!==t.user.superadmin&&t.user.superadmin,isBillingAdmin:void 0!==t.user.BillingAdministrator&&t.user.BillingAdministrator}),this.Auth.changeAuthStatus(!0),this.tokenService.setTokentime(t.expires_in),this.tokenService.loginSuccessEvent.next({name:t.user.name,id:t.user._id}),t.user.superadmin?this.router.navigateByUrl("sadmin/dashboard-superadmin"):(localStorage.setItem("toast","true"),localStorage.setItem("currentUser",JSON.stringify(t.user)),localStorage.setItem("token",t.access_token),this.router.navigate(["/dashboard"]))}static#e=this.\u0275fac=function(s){return new(s||c)(e.Y36(i.QS),e.Y36(g.s),e.Y36(p.e),e.Y36(a.F0),e.Y36(f.B),e.Y36(S.k),e.Y36(Z.jN))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-basic"]],decls:23,vars:3,consts:[[1,"auth-page-wrapper","pt-5"],["id","auth-particles",1,"auth-one-bg-position","auth-one-bg"],[1,"bg-overlay"],[1,"shape"],["xmlns","http://www.w3.org/2000/svg","version","1.1",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 1440 120"],["d","M 0,36 C 144,53.6 432,123.2 720,124 C 1008,124.8 1296,56.8 1440,40L1440 140L0 140z"],[1,"auth-page-content"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"text-center","mt-sm-5","mb-4","text-white-50"],["routerLink","",1,"d-inline-block","auth-logo"],["src","assets/images/logo-light.png","alt","Qforms","width","200"],["class","row justify-content-center",4,"ngIf"],[1,"footer"],[1,"text-center"],[1,"mb-0","text-muted"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","mt-4"],[1,"card-body","p-4"],[1,"text-center","mt-2"],[1,"text-primary"],[1,"text-muted"],[1,"user-thumb","text-center"],["src","assets/images/users/user-dummy-img.jpg","alt","thumbnail",1,"rounded-circle","img-thumbnail","avatar-lg"],[1,"font-size-15","mt-3"],[1,"p-2","mt-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","userpassword",1,"form-label"],["type","password","id","userpassword","placeholder","Enter password","required","","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback","align","left",4,"ngIf"],[1,"mb-2","mt-4"],["type","submit",1,"btn","btn-success","w-100"],[1,"mt-4","text-center"],[1,"mb-0"],["routerLink","/auth/login",1,"fw-semibold","text-primary","text-decoration-underline"],["align","left",1,"invalid-feedback"],[4,"ngIf"],["src","assets/lottie/search-users.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","250px","height","250px"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5),e.qZA()()(),e.kcU(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div")(12,"a",11),e._UZ(13,"img",12),e.qZA()()()()(),e.YNc(14,A,28,6,"div",13),e.YNc(15,U,9,0,"div",13),e.qZA()(),e.TgZ(16,"footer",14)(17,"div",7)(18,"div",8)(19,"div",9)(20,"div",15)(21,"p",16),e._uU(22),e.qZA()()()()()()()),2&s&&(e.xp6(14),e.Q6J("ngIf",!n.beforeSend),e.xp6(1),e.Q6J("ngIf",n.beforeSend),e.xp6(7),e.hij(" \xa9 ",n.year," All rights reserved. "))},dependencies:[d.mk,d.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,a.rH]})}const T=[{path:"",component:c}];class u{static#e=this.\u0275fac=function(s){return new(s||u)};static#t=this.\u0275mod=e.oAB({type:u});static#s=this.\u0275inj=e.cJS({imports:[a.Bz.forChild(T),a.Bz]})}var k=r(56253),y=r(44487),C=r.n(y);class l{constructor(){(0,k.N)(C().loadAnimation)}static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275mod=e.oAB({type:l});static#s=this.\u0275inj=e.cJS({imports:[d.ez,v.mH,i.UX,i.u5,u]})}}}]);